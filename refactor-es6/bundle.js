(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Anchor=exports.Anchor=function Anchor(href,content){_classCallCheck(this,Anchor);this.el=document.createElement("a");this.el.href=href;this.el.textContent=content}},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PlayButton=exports.PlayButton=function PlayButton(){_classCallCheck(this,PlayButton);this.el=document.createElement("button");this.el.innerHTML="&rtrif;";this.el.classList.add("PlayButton");this.el.classList.add("Button")};var PauseButton=exports.PauseButton=function PauseButton(){_classCallCheck(this,PauseButton);this.el=document.createElement("button");this.el.innerHTML="&equals;";this.el.classList.add("PauseButton");this.el.classList.add("Button")};var ClearButton=exports.ClearButton=function ClearButton(){_classCallCheck(this,ClearButton);this.el=document.createElement("button");this.el.innerHTML="&times;";this.el.classList.add("ClearButton");this.el.classList.add("Button")};var RandomButton=exports.RandomButton=function RandomButton(){_classCallCheck(this,RandomButton);this.el=document.createElement("button");this.el.innerHTML="&quest;";this.el.classList.add("RandomButton");this.el.classList.add("Button")};var SaveButton=exports.SaveButton=function SaveButton(){_classCallCheck(this,SaveButton);this.el=document.createElement("button");this.el.innerHTML="&rArr;";this.el.classList.add("SaveButton");this.el.classList.add("Button")}},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditorControls=exports.PlayerControls=undefined;var _button=require("./button");var _input=require("./input");var _anchor=require("./anchor");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PlayerControls=exports.PlayerControls=function PlayerControls(){_classCallCheck(this,PlayerControls);this.el=document.createElement("div");this.el.classList.add("PlayerControls");this.playButton=new _button.PlayButton;this.pauseButton=new _button.PauseButton;this.clearButton=new _button.ClearButton;this.randomButton=new _button.RandomButton;this.rangeInput=new _input.RangeInput(3,12,1,6);this.backAnchor=new _anchor.Anchor("../","View the original");this.backAnchor.el.classList.add("BackLink");this.el.appendChild(this.playButton.el);this.el.appendChild(this.pauseButton.el);this.el.appendChild(this.clearButton.el);this.el.appendChild(this.randomButton.el);this.el.appendChild(this.rangeInput.el);this.el.appendChild(this.backAnchor.el)};var EditorControls=exports.EditorControls=function EditorControls(){_classCallCheck(this,EditorControls);this.el=document.createElement("div");this.el.classList.add("EditorControls");this.rangeInput=new _input.RangeInput(5,17,2,7);this.el.appendChild(this.rangeInput.el)}},{"./anchor":1,"./button":2,"./input":9}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Editor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _grid=require("./grid");var _preset=require("./preset");var _renderer=require("./renderer");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Editor=exports.Editor=function(){function Editor(controls){var _this=this;_classCallCheck(this,Editor);this.el=document.createElement("div");this.el.classList.add("Editor");this.controls=controls;this.updateSize();this.grid=new _grid.Grid(this.size,this.size,0);this.renderer=new _renderer.Renderer(this.grid);this.renderer.el.addEventListener("mousedown",onMouseDown);this.renderer.render(false);this.el.appendChild(this.renderer.el);this.controls.rangeInput.el.addEventListener("change",function(event){_this.updateSize()});function onMouseDown(event){console.log("down",event);start();paintGridAt(event)}function onMouseMove(event){paintGridAt(event,1)}function onMouseLeave(event){console.log("leave",event);pause()}function onMouseEnter(event){console.log("enter",event);unpause()}function onMouseUp(event){console.log("up",event);stop()}var start=function start(){console.log("start");_this.renderer.el.addEventListener("mousemove",onMouseMove);_this.renderer.el.addEventListener("mouseleave",onMouseLeave);window.addEventListener("mouseup",onMouseUp)};var pause=function pause(){console.log("pause");_this.renderer.el.removeEventListener("mousemove",onMouseMove);_this.renderer.el.addEventListener("mouseenter",onMouseEnter)};var unpause=function unpause(){console.log("unpause");_this.renderer.el.addEventListener("mousemove",onMouseMove)};var stop=function stop(){console.log("stop");_this.renderer.el.removeEventListener("mousemove",onMouseMove);_this.renderer.el.removeEventListener("mouseleave",onMouseLeave);_this.renderer.el.removeEventListener("mouseenter",onMouseEnter);window.removeEventListener("mouseup",onMouseUp)};var paintGridAt=function paintGridAt(event){var color=event.altKey?0:1;var renderer=_this.renderer;var h=Math.floor(event.layerY/renderer.el.height*_this.size);var w=Math.floor(event.layerX/renderer.el.width*_this.size);_this.grid.grid1[h][w]=color;_this.grid.grid2[h][w]=color;_this.renderer.render(false)}}_createClass(Editor,[{key:"generatePreset",value:function generatePreset(){return new _preset.Preset("unnamed",this.grid,this.renderer.el.toDataURL("image/png"))}},{key:"updateSize",value:function updateSize(){var value=+this.controls.rangeInput.el.value;this.size=value;if(this.grid){this.grid.resize(value,value);this.renderer.updateSize();this.renderer.render(false)}}}]);return Editor}()},{"./grid":6,"./preset":11,"./renderer":12}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Footer=undefined;var _editor=require("./editor");var _button=require("./button");var _preset=require("./preset");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Footer=exports.Footer=function Footer(controls){var _this=this;_classCallCheck(this,Footer);this.el=document.createElement("div");this.el.classList.add("Footer");this.editor=new _editor.Editor(controls);this.saveButton=new _button.SaveButton;this.presetList=new _preset.PresetList;this.controls=controls;this.saveButton.el.addEventListener("click",function(){_this.presetList.addPreset(_this.editor.generatePreset())});this.el.appendChild(this.controls.el);this.el.appendChild(this.editor.el);this.el.appendChild(this.saveButton.el);this.el.appendChild(this.presetList.el)}},{"./button":2,"./editor":4,"./preset":11}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Grid=exports.Grid=function(){function Grid(width,height,value){_classCallCheck(this,Grid);this.width=width;this.height=height;this.grid1=[];this.grid2=[];if(value instanceof Array){for(var h=0;h<value.length;h++){var arr1=[];var arr2=[];for(var w=0;w<value[h].length;w++){arr1.push(+value[h][w]);arr2.push(+value[h][w])}this.grid1[h]=arr1;this.grid2[h]=arr2}}else if(typeof value==="undefined"){this.randomize()}else{this.fill(value)}}_createClass(Grid,[{key:"clear",value:function clear(){this.fill(null)}},{key:"randomize",value:function randomize(){this.fill(random);function random(){return Math.random()>.5?1:0}}},{key:"fill",value:function fill(value){for(var h=0;h<this.height;h++){var row1=[];var row2=[];for(var w=0;w<this.width;w++){row1.push(typeof value==="function"?value():value);row2.push(typeof value==="function"?value():value)}this.grid1[h]=row1;this.grid2[h]=row2}}},{key:"copy",value:function copy(){var copy=[];for(var h=0;h<this.height;h++){copy[h]=this.grid1[h].slice()}return copy}},{key:"toString",value:function toString(){console.log(this.grid1.map(function(arr){return arr.join("")}).join(","));return this.grid1.map(function(arr){return arr.join("")}).join(",")}},{key:"paint",value:function paint(posH,posW,dataGrid){var arr=dataGrid.split(",");console.log(posH,this.height,posH+arr.length);for(var h=0;h<arr.length&&posH+h<this.height;h++){for(var w=0;w<arr[h].length&&posW+w<this.width;w++){this.grid1[posH+h][posW+w]=+arr[h][w];this.grid2[posH+h][posW+w]=+arr[h][w]}}}},{key:"resize",value:function resize(width,height){console.log("resize");var beforeH=Math.floor(this.height-height/2);var beforeW=Math.floor(this.width-width/2);var grid1=[];var grid2=[];for(var h=0;h<height;h++){var arr1=[];var arr2=[];for(var w=0;w<width;w++){if(this.grid1[h-beforeH]){arr1[w]=this.grid1[h-beforeH][w-beforeW]||0;arr2[w]=this.grid2[h-beforeH][w-beforeW]||0}else{arr1[w]=0;arr2[w]=0}}grid1.push(arr1);grid2.push(arr2)}console.log(grid1);this.grid1=grid1;this.grid2=grid2;this.width=width;this.height=height}}]);return Grid}()},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Header=exports.Header=function Header(controls){_classCallCheck(this,Header);this.el=document.createElement("div");this.el.classList.add("Header");this.el.appendChild(controls.el)}},{}],8:[function(require,module,exports){"use strict";var _controls=require("./controls");var _footer=require("./footer");var _header=require("./header");var _player=require("./player");var wrapper=document.createElement("div");var playerControls=new _controls.PlayerControls;var editorControls=new _controls.EditorControls;var header=new _header.Header(playerControls);var player=new _player.Player(playerControls);var footer=new _footer.Footer(editorControls);wrapper.classList.add("PlayerWrapper");wrapper.appendChild(player.el);wrapper.appendChild(footer.el);document.body.appendChild(header.el);document.body.appendChild(wrapper)},{"./controls":3,"./footer":5,"./header":7,"./player":10}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var RangeInput=exports.RangeInput=function RangeInput(min,max,step,value){_classCallCheck(this,RangeInput);this.el=document.createElement("input");this.el.type="range";this.el.min=min;this.el.max=max;this.el.step=step;this.el.value=value}},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Player=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _grid=require("./grid");var _renderer=require("./renderer");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Player=exports.Player=function(){function Player(controls){var _this=this;_classCallCheck(this,Player);this.el=document.createElement("div");this.el.classList.add("Player");this.grid=new _grid.Grid(30,60);this.controls=controls;this.renderer=new _renderer.Renderer(this.grid);this.controls.playButton.el.addEventListener("click",function(){_this.play()});this.controls.pauseButton.el.addEventListener("click",function(){_this.pause()});this.controls.clearButton.el.addEventListener("click",function(){_this.grid.clear();if(!_this.running){_this.renderer.render()}});this.controls.randomButton.el.addEventListener("click",function(){_this.grid.randomize();if(!_this.running){_this.renderer.render()}});this.controls.rangeInput.el.addEventListener("change",function(event){_this.updateSpeed()});this.renderer.el.addEventListener("dragover",function(event){for(var i=0;i<event.dataTransfer.types.length;i++){if(event.dataTransfer.types[i]==="text/plain"){event.preventDefault();break}}});this.renderer.el.addEventListener("drop",function(event){console.log("drop",event);var dataGrid=event.dataTransfer.getData("text/plain");var _renderer$el=_this.renderer.el;var height=_renderer$el.height;var width=_renderer$el.width;var h=Math.floor(event.layerY/height*_this.grid.height);var w=Math.floor(event.layerX/width*_this.grid.width);console.log(h,w,dataGrid);_this.grid.paint(h,w,dataGrid);_this.renderer.render(false)});this.updateSpeed();this.play();this.el.appendChild(this.renderer.el)}_createClass(Player,[{key:"play",value:function play(){var _this2=this;var afterTimeout=function afterTimeout(){_this2.timeout=setTimeout(afterTimeout,_this2.speed);_this2.renderer.render()};this.running=true;afterTimeout()}},{key:"pause",value:function pause(){this.running=false;clearTimeout(this.timeout)}},{key:"updateSpeed",value:function updateSpeed(){var value=+this.controls.rangeInput.el.value;this.speed=Math.pow(value,3)+18}}]);return Player}()},{"./grid":6,"./renderer":12}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PresetList=exports.Preset=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _grid=require("./grid");var _renderer=require("./renderer");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Preset=exports.Preset=function(){function Preset(title,grid,dataURL){_classCallCheck(this,Preset);this.title=title;this.el=document.createElement("img");this.el.src=dataURL||this.generateDataURL(grid);this.el.title=title;this.el.addEventListener("dragstart",onDragStart);var dataGrid=grid.toString();function onDragStart(event){console.log("dragstart",event);console.log(dataGrid);event.dataTransfer.setData("text/plain",dataGrid)}}_createClass(Preset,[{key:"generateDataURL",value:function generateDataURL(grid){var renderer=new _renderer.Renderer(grid);renderer.render(false);console.log(renderer);console.log(renderer.el.toDataURL("image/png"));return renderer.el.toDataURL("image/png")}}]);return Preset}();var PresetList=exports.PresetList=function(){function PresetList(){_classCallCheck(this,PresetList);this.el=document.createElement("div");this.el.classList.add("PresetList");this.presets=[];var _this=this;_this.createPreset("Glider",["00000","01010","00110","00100","00000"]);_this.createPreset("Glider2",["00000","01010","01100","00100","00000"]);_this.createPreset("Pulsar",["00000000000000000","00000100000100000","00000100000100000","00000110001100000","00000000000000000","01110011011001110","00010101010101000","00000110001100000","00000000000000000","00000110001100000","00010101010101000","01110011011001110","00000000000000000","00000110001100000","00000100000100000","00000100000100000","00000000000000000"])}_createClass(PresetList,[{key:"addPreset",value:function addPreset(preset){this.presets.push(preset);this.el.appendChild(preset.el)}},{key:"createPreset",value:function createPreset(title,dataGridArray){var grid=[];for(var h=0;h<dataGridArray.length;h++){var arr=[];for(var w=0;w<dataGridArray[h].length;w++){arr.push(+dataGridArray[h][w])}grid.push(arr)}var preset=new Preset(title,new _grid.Grid(grid.length,grid[0].length,grid));this.presets.push(preset);this.el.appendChild(preset.el)}}]);return PresetList}()},{"./grid":6,"./renderer":12}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Renderer=exports.Renderer=function(){function Renderer(grid){_classCallCheck(this,Renderer);this.grid=grid;this.currentGrid=this.grid.grid1;this.el=document.createElement("canvas");this.updateSize();this.context=this.el.getContext("2d");this.context.fillStyle="#ddd";this.context.fillRect(0,0,this.el.width,this.el.height)}_createClass(Renderer,[{key:"render",value:function render(mutate){var grid,next;var decider=this.currentGrid===this.grid.grid1;if(mutate===false?!decider:decider){grid=this.grid.grid1;next=this.grid.grid2;this.currentGrid=this.grid.grid2}else{grid=this.grid.grid2;next=this.grid.grid1;this.currentGrid=this.grid.grid1}for(var h=0;h<this.grid.height;h++){for(var w=0;w<this.grid.width;w++){var cell=grid[h][w];this.context.fillStyle=cell===1?"#000":"#fff";this.context.fillRect(w*11,h*11,10,10);if(mutate===false){continue}var neighbors=[grid[h-1]&&grid[h-1][w-1],grid[h-1]&&grid[h-1][w],grid[h-1]&&grid[h-1][w+1],grid[h]&&grid[h][w-1],grid[h]&&grid[h][w+1],grid[h+1]&&grid[h+1][w-1],grid[h+1]&&grid[h+1][w],grid[h+1]&&grid[h+1][w+1]];var found=0;for(var i=0;i<neighbors.length;i++){if(neighbors[i]){found++}}if(found===3){next[h][w]=1}else if(cell&&found===2){next[h][w]=1}else{next[h][w]=0}}}}},{key:"updateSize",value:function updateSize(){this.el.width=this.grid.width*11-1;this.el.height=this.grid.height*11-1}}]);return Renderer}()},{}]},{},[8]);
